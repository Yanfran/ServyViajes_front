<div class="flex flex-col flex-auto min-w-0">

    <!-- Header -->
    <div
        class="flex flex-col sm:flex-row flex-0 sm:items-center sm:justify-between p-6 sm:py-8 sm:px-10 border-b bg-card dark:bg-transparent">
        <div class="flex-1 min-w-0">
            <!-- Breadcrumbs -->
            <div class="flex flex-wrap items-center font-medium">
                <div>
                    <a class="whitespace-nowrap text-primary-500">Servy Viajes</a>
                </div>
                <div class="flex items-center ml-1 whitespace-nowrap">
                    <mat-icon class="icon-size-5 text-secondary" [svgIcon]="'heroicons_mini:chevron-right'"></mat-icon>
                    <a class="ml-1 text-primary-500">Reservaciones</a>
                </div>
            </div>
            <!-- Title -->
            <div class="mt-2">
                <h2 class="text-3xl md:text-4xl font-extrabold tracking-tight leading-7 sm:leading-10 truncate">
                    Reservaciones
                </h2>
            </div>
        </div>
    </div>


    <!-- Main -->
    <div class="flex-auto p-6 sm:p-10">

        <!-- <div class="max-w-3xl"> -->

        <!-- Title and action buttons -->
        <div class="flex items-center justify-between w-full">
            <div>
                <h2 class="text-3xl font-semibold tracking-tight leading-8">Crear reservación</h2>
            </div>
            <div class="flex items-center ml-6">
                <button class="hidden sm:inline-flex ml-3" [routerLink]="['/reservations']" mat-flat-button
                    [color]="'primary'">
                    <mat-icon class="icon-size-5" svgIcon="heroicons_solid:arrow-left"></mat-icon>
                    <span class="ml-2">Regresar</span>
                </button>
            </div>
        </div>

        <!-- Horizontal stepper -->
        <!-- <div class="mt-16 mb-8 text-3xl font-bold">Horizontal Stepper</div> -->

        <form class="p-4 mt-5 bg-card shadow rounded overflow-hidden" [formGroup]="horizontalStepperForm">
            <mat-horizontal-stepper [linear]="true" #horizontalStepper (selectionChange)="stepChanged($event)">

                <mat-step [formGroupName]="'step1'" [stepControl]="horizontalStepperForm.get('step1')"
                    #horizontalStepperStep1> <!--[editable]="isEditable"-->
                    <ng-template matStepLabel>Datos generales del hotel</ng-template>

                    <div class="flex mt-4 mb-2.5">
                        <mat-form-field class="flex-auto sm:pl-3 fuse-mat-dense fuse-mat-bold fuse-mat-rounded">
                            <mat-label>Seleccione un evento</mat-label>
                            <mat-select [formControl]="horizontalStepperForm.get('step1').get('events')"
                                placeholder="Seleccione un evento">
                                <mat-option *ngFor="let event of events" [value]="event.id">
                                    {{ event.nombre }}
                                </mat-option>
                            </mat-select>
                            <mat-error *ngIf="horizontalStepperForm.get('step1').get('events').hasError('required')">
                                El evento es requerido.
                            </mat-error>
                        </mat-form-field>
                    </div>

                    <div class="flex mt-2">
                        <mat-form-field class="flex-auto sm:pl-3 fuse-mat-dense fuse-mat-bold fuse-mat-rounded">
                            <mat-label>Nombre del hotel</mat-label>
                            <input readonly="true" matInput maxlength="150" [formControlName]="'nombre'"
                                [placeholder]="'Nombre del hotel'">
                            <mat-error *ngIf="horizontalStepperForm.get('step1').get('nombre').hasError('required')">
                                El hotel es requerido.
                            </mat-error>
                        </mat-form-field>
                    </div>

                    <div class="flex">
                        <mat-form-field class="flex-auto sm:pl-3 fuse-mat-dense fuse-mat-bold fuse-mat-rounded">
                            <mat-label>Servicios</mat-label>
                            <textarea [placeholder]="'Servicios'" matInput [formControlName]="'servicio'"
                                cdkTextareaAutosize [(ngModel)]="servicios" [cdkAutosizeMinRows]="3" readonly="true">
                                </textarea>
                            <mat-error *ngIf="horizontalStepperForm.get('step1').get('servicio').hasError('required')">
                                Los servicios son requerido.
                            </mat-error>
                        </mat-form-field>
                    </div>

                    <div class="flex justify-end">
                        <button class="px-8" mat-flat-button [color]="'primary'"
                            [disabled]="horizontalStepperStep1.stepControl.pristine || horizontalStepperStep1.stepControl.invalid"
                            type="button" matStepperNext>
                            Siguiente
                        </button>
                    </div>
                </mat-step>

                <mat-step [formGroupName]="'step2'" [stepControl]="horizontalStepperForm.get('step2')"
                    #horizontalStepperStep2> <!--[editable]="isEditable"-->
                    <ng-template matStepLabel>Datos generales de la habitación</ng-template>

                    <div class="flex mt-4 mb-2.5">
                        <mat-form-field class="flex-auto sm:pl-3 fuse-mat-dense fuse-mat-bold fuse-mat-rounded">
                            <mat-label>Tipo de plan</mat-label>
                            <mat-select [formControl]="horizontalStepperForm.get('step2').get('planes')"
                                placeholder="Seleccione un plan">
                                <mat-option *ngFor="let tipo of tiposDePlanSeleccionados" [value]="tipo.id">
                                    {{ tipo.nombre }}
                                </mat-option>
                            </mat-select>
                            <mat-error *ngIf="horizontalStepperForm.get('step2').get('planes').hasError('required')">
                                El plan es requerido.
                            </mat-error>
                        </mat-form-field>
                    </div>

                    <div class="flex flex-col mr-3">
                        <table class="border-collapse border border-slate-400 ml-3 mt-5 mb-5">
                            <thead>
                                <tr>
                                    <th class="border border-slate-300">Tipo de habitación</th>
                                    <th class="border border-slate-300">Sencilla</th>
                                    <th class="border border-slate-300">Doble</th>
                                    <th class="border border-slate-300">Triple</th>
                                    <th class="border border-slate-300">Cuadruple</th>
                                    <th class="border border-slate-300">Infantes</th>
                                    <th class="border border-slate-300">Menores</th>
                                    <th class="border border-slate-300">Junior</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let room of selectedPlanData">
                                    <td class="border border-slate-300 text-center">{{ room.tipo_habitacion }}</td>
                                    <td class="border border-slate-300 text-center">${{ room.sencilla | number:'1.2-2'
                                        }}</td>
                                    <td class="border border-slate-300 text-center">${{ room.doble | number:'1.2-2' }}
                                    </td>
                                    <td class="border border-slate-300 text-center">${{ room.triple | number:'1.2-2' }}
                                    </td>
                                    <td class="border border-slate-300 text-center">${{ room.cuadruple | number:'1.2-2'
                                        }}</td>
                                    <td class="border border-slate-300 text-center">${{room.infante_precio_menores |
                                        number:'1.2-2'}} - ({{ room.infante_edad_minima }} - {{
                                        room.infante_edad_maxima}})</td>
                                    <td class="border border-slate-300 text-center">${{room.precio_menores |
                                        number:'1.2-2' }} - ({{ room.edad_minima }} - {{
                                        room.edad_maxima }})</td>
                                    <td class="border border-slate-300 text-center">${{room.junior_precio_menores |
                                        number:'1.2-2'}} - ({{ room.junior_edad_minima }} - {{
                                        room.junior_edad_maxima }})</td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="ml-3 mb-4" *ngIf="!selectedPlanData || selectedPlanData.length === 0">No hay datos
                            disponibles.</div>
                    </div>

                    <!-- Datos generales -->
                    <div class="ml-3 mb-3 font-medium tracking-tight text-secondary">Datos generales</div>

                    <div class="flex flex-col sm:flex-row">
                        <div class="flex-auto sm:pr-3">

                            <mat-form-field
                                class="flex-auto sm:pl-3 fuse-mat-dense fuse-mat-bold fuse-mat-rounded custom-mat-form-field-1">
                                <mat-label>Fecha de entrada</mat-label>
                                <input matInput [formControlName]="'fecha_entrada'" [matDatepicker]="picker"
                                    [placeholder]="'Fecha de entrada'" [matDatepickerFilter]="dateFilter">
                                <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                                <mat-datepicker #picker></mat-datepicker>
                                <mat-error
                                    *ngIf="horizontalStepperForm.get('step2').get('fecha_entrada').hasError('required')">
                                    La fecha de entrada es requerida.
                                </mat-error>
                                <!-- <mat-error *ngIf="!horizontalStepperForm.get('step2').get('fecha_entrada').hasError('required') && !dateFilter(horizontalStepperForm.get('fecha_salida').value)">
                                        La fecha de entrada debe ser futura y diferente a la fecha de entrada.
                                    </mat-error> -->
                            </mat-form-field>

                        </div>

                        <div class="flex-auto sm:pl-3">

                            <mat-form-field
                                class="flex-auto sm:pl-3 fuse-mat-dense fuse-mat-bold fuse-mat-rounded custom-mat-form-field-1">
                                <mat-label>Fecha de salida</mat-label>
                                <input matInput [formControlName]="'fecha_salida'" [matDatepicker]="picker1"
                                    [placeholder]="'Fecha de salida'" [matDatepickerFilter]="dateFilter">
                                <mat-datepicker-toggle matIconSuffix [for]="picker1"></mat-datepicker-toggle>
                                <mat-datepicker #picker1></mat-datepicker>

                                <mat-error
                                    *ngIf="horizontalStepperForm.get('step2').get('fecha_salida').hasError('required')">
                                    La fecha de salida es requerida.
                                </mat-error>
                                <mat-error
                                    *ngIf="horizontalStepperForm.get('step2').get('fecha_salida').hasError('fechaSalidaInvalida')">
                                    La fecha de salida debe ser futura y mayor que la fecha de entrada.
                                </mat-error>


                            </mat-form-field>

                        </div>
                    </div>



                    <!-- GRADO ACADEMICO -->
                    <div *ngFor="
                                let gradoCtrl of gradosArray.controls;
                                let i = index
                            " class="grid grid-cols-5 gap-4 mt-5">

                        <div class="col-span-2 ...">
                            <div class="flex-auto sm:pr-3">
                                <mat-form-field
                                    class="flex-auto sm:pl-3 fuse-mat-dense fuse-mat-bold fuse-mat-rounded custom-mat-form-field-1">
                                    <mat-label>Tipo de habitacion</mat-label>
                                    <mat-select [formControl]="gradoCtrl.get('tipo_habitacion')"
                                        placeholder="Tipo de habitación">
                                        <mat-option *ngFor="let plan of selectedPlanData" [value]="plan.id">
                                            <!--[value]="plan.id"-->
                                            {{ plan.tipo_habitacion }}
                                        </mat-option>
                                    </mat-select>
                                    <mat-error *ngIf="gradoCtrl.get('tipo_habitacion').hasError('required')">
                                        La habitación es requerida.
                                    </mat-error>
                                </mat-form-field>
                            </div>
                        </div>

                        <div class="col-span-2"> <!-- col-span-2 ... -->
                            <div class="flex-auto sm:pr-3">
                                <mat-form-field
                                    class="flex-auto sm:pl-3 fuse-mat-dense fuse-mat-bold fuse-mat-rounded custom-mat-form-field-1">
                                    <mat-label>Cantidad</mat-label>
                                    <input type="number" min="1" max="10" matInput
                                        [formControl]="gradoCtrl.get('cantidad')" [placeholder]="'Cantidad'"
                                        (blur)="verificar()">
                                    <mat-error *ngIf="gradoCtrl.get('cantidad').hasError('required')">
                                        La cantidad es requerida.
                                    </mat-error>
                                    <mat-error *ngIf="gradoCtrl.get('cantidad').hasError('fueraDeRango')">
                                        La cantidad debe estar entre 1 y 10.
                                    </mat-error>
                                    <mat-error *ngIf="gradoCtrl.get('cantidad').hasError('cantidadSuperior')">
                                        La cantidad debe ser menor
                                    </mat-error>

                                </mat-form-field>
                            </div>
                        </div>

                        <div class="col-span-1">
                            <mat-label style="font-weight: 500;" class="pr-5 pl-5">Eliminar</mat-label>
                            <!--*ngIf="i === 0"-->
                            <div class="flex-auto sm:pl-3 mt-1">
                                <button mat-flat-button w-full color="warn" class="pr-5 pl-5 mt-1"
                                    (click)="eliminarGradoAcademico(i)">
                                    <mat-icon svgIcon="heroicons_solid:trash"></mat-icon>
                                    Eliminar
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-5 gap-4 mt-3">
                        <div class="col-span-2 ...">
                            <div class="flex-auto sm:pr-3">
                            </div>
                        </div>
                        <div class="col-span-2 ...">
                            <div class="flex-auto sm:pl-3">

                            </div>
                        </div>
                        <div class="...">
                            <div class="flex-auto sm:pl-3">
                                <button mat-flat-button w-full color="primary" class="pr-5 pl-5"
                                    (click)="agregarGradoAcademico()"
                                    *ngIf="selectedPlanData && selectedPlanData.length > 1 && !seleccionadasTresOpciones">
                                    <mat-icon svgIcon="heroicons_solid:plus"></mat-icon>
                                    Agregar
                                </button>
                            </div>
                        </div>
                    </div>


                    <div class="flex justify-end mt-5">
                        <button class="px-8 mr-2" mat-flat-button [color]="'accent'" type="button" matStepperPrevious>
                            Regresar
                        </button>
                        <button class="px-8" mat-flat-button [color]="'primary'"
                            [disabled]="horizontalStepperStep2.stepControl.pristine || horizontalStepperStep2.stepControl.invalid"
                            type="button" matStepperNext>
                            Siguiente
                        </button>
                    </div>
                </mat-step>

                <mat-step [formGroupName]="'step3'" [stepControl]="horizontalStepperForm.get('step3')"
                    #horizontalStepperStep3> <!--[editable]="isEditable"-->
                    <ng-template matStepLabel>Datos del solicitante</ng-template>

                    <!-- <p class="my-6 font-medium">
                            We'll always let you know about important changes, but you pick what else you want to hear about.
                        </p> -->

                    <div class="grid grid-cols-12 gap-4 mt-3">

                        <div class="col-span-6 ...">
                            <div class="flex-auto sm:pr-1">
                                <mat-form-field
                                    class="flex-auto sm:pl-3 fuse-mat-dense fuse-mat-bold fuse-mat-rounded custom-mat-form-field-1">
                                    <mat-label>Nombre</mat-label>
                                    <input matInput [formControlName]="'nombre_solicitante'" [placeholder]="'Nombre'">
                                    <mat-error
                                        *ngIf="horizontalStepperForm.get('step3').get('nombre_solicitante').hasError('required')">
                                        El nombre es obligatorio
                                    </mat-error>
                                    <mat-error
                                        *ngIf="horizontalStepperForm.get('step3').get('nombre_solicitante').hasError('maxLength')">
                                        El nombre no puede tener más de 10 caracteres.
                                    </mat-error>
                                    <mat-error
                                        *ngIf="horizontalStepperForm.get('step3').get('nombre_solicitante').hasError('pattern')">
                                        El nombre no puede contener números ni caracteres especiales.
                                    </mat-error>

                                </mat-form-field>
                            </div>
                        </div>

                        <div class="col-span-6 ...">
                            <div class="flex-auto sm:pl-1">
                                <mat-form-field
                                    class="flex-auto sm:pl-3 fuse-mat-dense fuse-mat-bold fuse-mat-rounded custom-mat-form-field-1">
                                    <mat-label>Apellidos</mat-label>
                                    <input matInput [formControlName]="'apellidos_solicitantes'"
                                        [placeholder]="'Apellidos'">
                                    <mat-error
                                        *ngIf="horizontalStepperForm.get('step3').get('apellidos_solicitantes').hasError('required')">
                                        El apellido es obligatorio
                                    </mat-error>
                                    <mat-error
                                        *ngIf="horizontalStepperForm.get('step3').get('apellidos_solicitantes').hasError('maxLength')">
                                        Los apellidos no pueden tener más de 10 caracteres.
                                    </mat-error>
                                    <mat-error
                                        *ngIf="horizontalStepperForm.get('step3').get('apellidos_solicitantes').hasError('pattern')">
                                        Los apellidos no pueden contener números ni caracteres especiales.
                                    </mat-error>
                                </mat-form-field>
                            </div>
                        </div>

                    </div>

                    <div class="grid grid-cols-12 gap-4 mt-3">

                        <div class="col-span-6 ...">
                            <div class="flex-auto sm:pr-1">
                                <mat-form-field
                                    class="flex-auto sm:pl-3 fuse-mat-dense fuse-mat-bold fuse-mat-rounded custom-mat-form-field-1">
                                    <mat-label>Correo electrónico</mat-label>
                                    <input matInput [formControlName]="'correo_solicitante'"
                                        [placeholder]="'Correo electrónico'">
                                    <mat-error
                                        *ngIf="horizontalStepperForm.get('step3').get('correo_solicitante').hasError('email')">
                                        Deber agregar un correo electronico
                                    </mat-error>
                                    <mat-error
                                        *ngIf="horizontalStepperForm.get('step3').get('correo_solicitante').hasError('required')">
                                        El correo electronico es obligatorio
                                    </mat-error>
                                </mat-form-field>
                            </div>
                        </div>

                        <div class="col-span-6 ...">
                            <div class="flex-auto sm:pl-1">
                                <mat-form-field
                                    class="flex-auto sm:pl-3 fuse-mat-dense fuse-mat-bold fuse-mat-rounded custom-mat-form-field-1">
                                    <mat-label>Teléfono</mat-label>
                                    <input type="text" matInput maxlength="12"
                                        [formControlName]="'telefono_solicitantes'" [placeholder]="'Teléfono'"
                                        mask="00-0000-0000">
                                    <mat-error
                                        *ngIf="horizontalStepperForm.get('step3').get('telefono_solicitantes').hasError('required')">
                                        El teléfono es obligatorio
                                    </mat-error>
                                    <mat-error
                                        *ngIf="horizontalStepperForm.get('step3').get('telefono_solicitantes').hasError('pattern')">
                                        El teléfono debe contener solo números.
                                    </mat-error>
                                </mat-form-field>
                            </div>
                        </div>

                    </div>


                    <div class="grid grid-cols-12 gap-4 mt-3">

                        <div class="col-span-6 ...">
                            <div class="flex-auto sm:pr-1">
                                <mat-form-field
                                    class="flex-auto sm:pl-3 fuse-mat-dense fuse-mat-bold fuse-mat-rounded custom-mat-form-field-1">
                                    <mat-label>Ciudad</mat-label>
                                    <input matInput [formControlName]="'ciudad_solicitante'" [placeholder]="'Ciudad'">
                                    <mat-error
                                        *ngIf="horizontalStepperForm.get('step3').get('ciudad_solicitante').hasError('required')">
                                        La ciudad es obligatorio
                                    </mat-error>
                                </mat-form-field>
                            </div>
                        </div>

                        <div class="col-span-6 ...">
                            <div class="flex-auto sm:pl-1">
                                <!-- <mat-form-field class="flex-auto sm:pl-3 fuse-mat-dense fuse-mat-bold fuse-mat-rounded custom-mat-form-field-1">               
                                        <mat-label>Telefono</mat-label>
                                        <input matInput [formControlName]="'telefono_solicitantes'" [placeholder]="'Telefono'">                                                                        
                                    </mat-form-field>  -->
                            </div>
                        </div>

                    </div>

                    <div class="flex justify-end mt-8">
                        <button class="px-8 mr-2" mat-flat-button [color]="'accent'" type="button" matStepperPrevious>
                            Regresar
                        </button>
                        <button class="px-8" mat-flat-button [color]="'primary'"
                            [disabled]="horizontalStepperStep3.stepControl.pristine || horizontalStepperStep3.stepControl.invalid"
                            type="button" (click)="goToStep4()" matStepperNext>
                            Siguiente
                        </button>
                    </div>
                </mat-step>

                <mat-step [formGroupName]="'step4'" [stepControl]="horizontalStepperForm.get('step4')"
                    #horizontalStepperStep4> <!--[editable]="isEditable"-->
                    <ng-template matStepLabel>Habitaciones</ng-template>

                    <!-- jorge -->

                    <div *ngFor="let habCtrl of habitaciones.controls; let i = index"
                        class="border-2 border-gray-300 rounded-lg ml-3 mb-3 p-3 mt-8 relative">
                        <h2 class="absolute top-0 left-4 bg-white px-2 -mt-4 font-medium text-gray-600">
                            Habitación {{i + 1}}
                        </h2>

                        <div class="grid grid-cols-12 gap-4 mt-3">
                            <div class="col-span-2 ...">
                                <h4 class="ml-3">{{ habCtrl.get('tipo_habitacion').value.charAt(0).toUpperCase() +
                                    habCtrl.get('tipo_habitacion').value.slice(1) }}</h4>
                            </div>

                            <div class="col-span-5 ...">
                                <div class="flex-auto sm:pr-1">
                                    <mat-form-field
                                        class="flex-auto sm:pl-3 fuse-mat-dense fuse-mat-bold fuse-mat-rounded custom-mat-form-field-1">
                                        <mat-label>Adultos</mat-label>
                                        <input matInput type="number" min="1" max="4"
                                            [formControl]="habCtrl.get('cant_adultos')" [placeholder]="'Adultos'"
                                            (input)="agregarEliminarPersonas(i, 'adultos')">
                                    </mat-form-field>
                                    <mat-error
                                        *ngIf="habCtrl.get('cant_adultos').hasError('cantidadTotalExcedida') || habCtrl.get('cant_menores').hasError('cantidadTotalExcedida')">
                                        La cantidad total de personas no puede ser mayor a 4.
                                    </mat-error>
                                </div>
                            </div>

                            <div class="col-span-5 ...">
                                <div class="flex-auto sm:pl-1">
                                    <mat-form-field
                                        class="flex-auto sm:pl-3 fuse-mat-dense fuse-mat-bold fuse-mat-rounded custom-mat-form-field-1">
                                        <mat-label>Menores</mat-label>
                                        <input matInput type="number" min="0" max="5"
                                            [formControl]="habCtrl.get('cant_menores')" [placeholder]="'Menores'"
                                            (input)="agregarEliminarPersonas(i, 'menores')">
                                    </mat-form-field>
                                    <mat-error
                                        *ngIf="habCtrl.get('cant_adultos').hasError('cantidadTotalExcedida') || habCtrl.get('cant_menores').hasError('cantidadTotalExcedida')">
                                        La cantidad total de personas no puede ser mayor a 4.
                                    </mat-error>
                                </div>
                            </div>

                        </div>

                        <div *ngFor="let adulto of habCtrl.get('adultos').value.controls; let j = index"
                            class="grid grid-cols-12 gap-4 mt-3">
                            <div class="col-span-2 ...">
                                <h4 class="ml-3" *ngIf="j === 0">Reservar a:</h4>
                            </div>

                            <div class="col-span-5 ...">
                                <div class="flex-auto sm:pr-1">
                                    <mat-form-field
                                        class="flex-auto sm:pl-3 fuse-mat-dense fuse-mat-bold fuse-mat-rounded custom-mat-form-field-1">
                                        <mat-label>{{ j === 0 ? 'Titular' : 'Acompañante' }}</mat-label>
                                        <input matInput [formControl]="adulto.get('nombre')" [placeholder]="'Nombres'">
                                        <mat-error *ngIf="adulto.get('nombre').hasError('required')">
                                            El nombre es obligatorio
                                        </mat-error>
                                        <mat-error *ngIf="adulto.get('nombre').hasError('maxLength')">
                                            El nombre no puede tener más de 10 caracteres.
                                        </mat-error>
                                        <mat-error *ngIf="adulto.get('nombre').hasError('pattern')">
                                            El nombre no puede contener números ni caracteres especiales.
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                            </div>

                            <div class="col-span-5 ...">
                                <div class="flex-auto sm:pl-1">
                                    <mat-form-field
                                        class="flex-auto sm:pl-3 fuse-mat-dense fuse-mat-bold fuse-mat-rounded custom-mat-form-field-1 mt-5">
                                        <input matInput [formControl]="adulto.get('apellido')"
                                            [placeholder]="'Apellidos'">
                                        <mat-error *ngIf="adulto.get('apellido').hasError('required')">
                                            El apelido es obligatorio
                                        </mat-error>
                                        <mat-error *ngIf="adulto.get('apellido').hasError('maxLength')">
                                            El apelido no puede tener más de 10 caracteres.
                                        </mat-error>
                                        <mat-error *ngIf="adulto.get('apellido').hasError('pattern')">
                                            El apelido no puede contener números ni caracteres especiales.
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                            </div>
                        </div>

                        <div *ngFor="let menor of habCtrl.get('menores').value.controls; let j = index"
                            class="grid grid-cols-12 gap-4 mt-3">
                            <div class="col-span-2 ...">
                                <h4 class="ml-3" *ngIf="j === 0">Menores:</h4>
                            </div>

                            <div class="col-span-10 ...">
                                <div class="grid grid-cols-12">
                                    <div class="col-span-4 ...">
                                        <div class="flex-auto sm:pr-1">
                                            <mat-form-field
                                                class="flex-auto sm:pl-3 fuse-mat-dense fuse-mat-bold fuse-mat-rounded custom-mat-form-field-1">
                                                <input matInput [formControl]="menor.get('nombre')"
                                                    [placeholder]="'Nombres'">
                                                <mat-error *ngIf="menor.get('nombre').hasError('required')">
                                                    El nombre es obligatorio
                                                </mat-error>
                                                <mat-error *ngIf="menor.get('nombre').hasError('maxLength')">
                                                    El nombre no puede tener más de 10 caracteres.
                                                </mat-error>
                                                <mat-error *ngIf="menor.get('nombre').hasError('pattern')">
                                                    El nombre no puede contener números ni caracteres especiales.
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>

                                    <div class="col-span-4 ...">
                                        <div class="flex-auto sm:pr-1">
                                            <mat-form-field
                                                class="flex-auto sm:pl-3 fuse-mat-dense fuse-mat-bold fuse-mat-rounded custom-mat-form-field-1">
                                                <input matInput [formControl]="menor.get('apellido')"
                                                    [placeholder]="'Apellidos'">
                                                <mat-error *ngIf="menor.get('nombre').hasError('required')">
                                                    El nombre es obligatorio
                                                </mat-error>
                                                <mat-error *ngIf="menor.get('nombre').hasError('maxLength')">
                                                    El nombre no puede tener más de 10 caracteres.
                                                </mat-error>
                                                <mat-error *ngIf="menor.get('nombre').hasError('pattern')">
                                                    El nombre no puede contener números ni caracteres especiales.
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>


                                    <div class="col-span-4 ...">
                                        <div class="flex-auto sm:pr-1">
                                            <mat-form-field
                                                class="flex-auto sm:pl-3 fuse-mat-dense fuse-mat-bold fuse-mat-rounded custom-mat-form-field-1">
                                                <input matInput type="text" [formControl]="menor.get('edad')"
                                                    [placeholder]="'Edad'" inputmode="numeric" pattern="[0-9]*">
                                                <mat-error *ngIf="menor.get('edad').hasError('required')">
                                                    La edad es obligatoria
                                                </mat-error>
                                                <mat-error *ngIf="menor.get('edad').hasError('pattern')">
                                                    La edad debe contener solo números.
                                                </mat-error>
                                                <mat-error *ngIf="menor.get('edad').hasError('edadMaxima')">
                                                    La edad no puede ser mayor a 17 años.
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>

                    <!-- jorge -->



                    <div class="flex justify-end">
                        <button class="px-8 mr-2" mat-flat-button [color]="'accent'" type="button" matStepperPrevious>
                            Regresar
                        </button>
                        <button class="px-8" mat-flat-button [color]="'primary'"
                            [disabled]="horizontalStepperStep4.stepControl.invalid || !todosLosCamposLlenos()"
                            type="button" (click)="calculoAdultosMenores()" matStepperNext>
                            Siguiente
                        </button>
                    </div>
                </mat-step>

                <mat-step [formGroupName]="'step5'" [stepControl]="horizontalStepperForm.get('step5')"
                    #horizontalStepperStep5> <!--[editable]="isEditable"-->
                    <ng-template matStepLabel>Desglose y pago</ng-template>

                    <!-- start card -->
                    <div class="mat-elevation-z8 rounded-2xl mt-8">

                        <div class="flex flex-col p-8 bg-card rounded-2xl shadow overflow-hidden">


                            <!-- Invoice -->
                            <!-- Datos generales del asistente -->
                            <div class="font-medium tracking-tight text-secondary">Datos generales del asistente</div>

                            <div class="grid grid-cols-12 gap-x-1">
                                <!-- Spacer -->
                                <div class="col-span-12 mt-5"></div>

                                <!-- CONCEPTO -->
                                <div class="col-span-10 self-center font-medium tracking-tight text-secondary">CONCEPTO
                                </div>
                                <div class="col-span-2 text-right text-lg">Sub total</div>
                            </div>

                            <div class="grid grid-cols-12 gap-x-1" *ngFor=" let desglose of desglose; let i = index">
                                <!-- Divider -->
                                <div class="col-span-12 my-3 border-b"></div>
                                <div class="col-span-10 self-center font-medium tracking-tight text-secondary">
                                    <div>{{ desglose.tipo_habitacion }} </div> <!--#{{ i + 1 }}-->
                                </div>
                                <div class="col-span-2 text-right text-lg">$
                                    {{ desglose.costo | number:'1.2-2' }}</div>
                            </div>


                            <div class="grid grid-cols-12 gap-x-1">
                                <!-- Divider -->
                                <div class="col-span-12 my-3 border-b"></div>
                                <!-- MENORES -->
                                <div class="col-span-10 self-center font-medium tracking-tight text-secondary">
                                    <div>Menores</div>
                                </div>
                                <div class="col-span-2 text-right text-lg">${{ sumaCostoMenores | number:'1.2-2' }}
                                </div>
                            </div>

                            <div class="grid grid-cols-12 gap-x-1">
                                <!-- Divider -->
                                <div class="col-span-12 my-3 border-b"></div>
                                <!-- Total -->
                                <div class="col-span-10 self-center text-2xl font-medium tracking-tight text-secondary">
                                    TOTAL</div>
                                <div class="col-span-2 text-right text-2xl font-medium">$
                                    {{ (idPlan === 1 ? todoIncluido : sumaCostoAdulto + sumaCostoMenores) |
                                    number:'1.2-2' }}
                                </div>
                                <!-- Divider -->
                                <div class="col-span-12 my-3 border-b"></div>
                            </div>


                            <div class="grid grid-cols-12 gap-x-1 ">
                                <div class="col-span-6 mt-5">
                                    <div class="flex-auto sm:pr-3">
                                        <mat-form-field
                                            class="flex-auto fuse-mat-dense fuse-mat-bold fuse-mat-rounded custom-mat-form-field-1">
                                            <mat-label>Clave de reservación</mat-label>
                                            <input matInput class="notAllowed" readonly="true"
                                                [placeholder]="'Clave de reservación'">
                                        </mat-form-field>
                                    </div>
                                </div>
                                <div class="col-span-6 mt-5">
                                    <div class="flex-auto sm:pl-3">

                                        <mat-form-field
                                            class="flex-auto fuse-mat-dense fuse-mat-bold fuse-mat-rounded custom-mat-form-field-1">
                                            <mat-label>Seleccione una metodo de pago</mat-label>
                                            <mat-select
                                                [formControl]="horizontalStepperForm.get('step5').get('tipo_pago')"
                                                placeholder="Seleccione un metodo de pago">
                                                <mat-option *ngFor="let paymentType of paymentTypes"
                                                    [value]="paymentType.id">
                                                    {{ paymentType.nombre }}
                                                </mat-option>
                                            </mat-select>
                                            <mat-error
                                                *ngIf="horizontalStepperForm.get('step5').get('tipo_pago').hasError('required')">
                                                El metodo de pago es requerido.
                                            </mat-error>
                                        </mat-form-field>

                                    </div>
                                </div>
                            </div>

                            <div class="mt-3">
                                <div class="font-medium">
                                    Al registrarse se te enviará un correo confirmando tu registro, asi como los datos
                                    de pago. Una vez realizada el pago deberás regresar al registro a subir el
                                    comprobante
                                    correspondiente.
                                </div>
                            </div>

                            <br>
                            <br>

                            <!--//////////////////////////////// TIPOS DE PAGOS  ////////////////////////////-->
                            <div class="border-2 border-gray-300 rounded-lg ml-3 mb-3 p-8 mt-8 relative"
                                *ngIf="showOpenpayForm">
                                <h2 class="absolute top-0 left-4 bg-white px-2 -mt-4 font-medium text-gray-600">
                                    Tarjeta de credito o debito
                                </h2>


                                <!-- Logo -->
                                <div class="grid grid-cols-12 gap-x-1 ">
                                    <div class="col-span-12 mt-5 flex justify-center">
                                        <div class="w-50">
                                            <!--w-12-->
                                            <img src="assets/images/logo/logo_new.png">
                                        </div>
                                    </div>
                                </div>


                                <div class="grid grid-cols-12 gap-x-1 ">
                                    <div class="col-span-6 mt-5">
                                        <div class="flex-auto sm:pr-3">
                                            <mat-form-field
                                                class="flex-auto fuse-mat-dense fuse-mat-bold fuse-mat-rounded custom-mat-form-field-1">
                                                <mat-label>Nombre del titular</mat-label>
                                                <input matInput maxlength="250" [formControlName]="'nombres_openpay'"
                                                    [placeholder]="'Nombre'">
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-span-6 mt-5">
                                        <div class="flex-auto sm:pl-3">
                                            <mat-form-field
                                                class="flex-auto fuse-mat-dense fuse-mat-bold fuse-mat-rounded custom-mat-form-field-1">
                                                <mat-label>Apellido del titular</mat-label>
                                                <input matInput maxlength="250" [formControlName]="'apellidos_openpay'"
                                                    [placeholder]="'Apellidos'">
                                            </mat-form-field>
                                        </div>
                                    </div>
                                </div>

                                <div class="grid grid-cols-12 gap-x-1 ">
                                    <div class="col-span-6 mt-5">
                                        <div class="flex-auto sm:pr-3">
                                            <mat-form-field
                                                class="flex-auto fuse-mat-dense fuse-mat-bold fuse-mat-rounded custom-mat-form-field-1">
                                                <mat-label>Ciudad</mat-label>
                                                <input matInput maxlength="250" [formControlName]="'ciudad_openpay'"
                                                    [placeholder]="'Ciudad'">
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-span-6 mt-5">
                                        <div class="flex-auto sm:pl-3">
                                            <mat-form-field
                                                class="flex-auto fuse-mat-dense fuse-mat-bold fuse-mat-rounded custom-mat-form-field-1">
                                                <mat-label>Estado</mat-label>
                                                <input matInput maxlength="250" [formControlName]="'estado_openpay'"
                                                    [placeholder]="'Estado'">
                                            </mat-form-field>
                                        </div>
                                    </div>
                                </div>

                                <div class="grid grid-cols-12 gap-x-1 ">
                                    <div class="col-span-6 mt-5">
                                        <div class="flex-auto sm:pr-3">
                                            <mat-form-field
                                                class="flex-auto fuse-mat-dense fuse-mat-bold fuse-mat-rounded custom-mat-form-field-1">
                                                <mat-label>Código postal</mat-label>
                                                <input matInput maxlength="5" type="number" (input)="cp($event)"
                                                    [formControlName]="'cp_openpay'" class="example-left-align"
                                                    placeholder="76900">
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-span-6 mt-5">
                                        <div class="flex-auto sm:pl-3">
                                            <mat-form-field
                                                class="flex-auto fuse-mat-dense fuse-mat-bold fuse-mat-rounded custom-mat-form-field-1">
                                                <mat-label>Dirección</mat-label>
                                                <input matInput maxlength="250" [formControlName]="'direccion_openpay'"
                                                    [placeholder]="'Dirección'">
                                            </mat-form-field>
                                        </div>
                                    </div>
                                </div>

                                <div class="grid grid-cols-12 gap-x-1 ">
                                    <div class="col-span-6 mt-5">
                                        <div class="flex-auto sm:pr-3">
                                            <mat-form-field
                                                class="flex-auto fuse-mat-dense fuse-mat-bold fuse-mat-rounded custom-mat-form-field-1">
                                                <mat-label>Correo electrónico</mat-label>
                                                <input matInput maxlength="250" [formControlName]="'email_openpay'"
                                                    [placeholder]="'Correo electrónico'">
                                                <mat-error
                                                    *ngIf="horizontalStepperForm.get('step5').get('email_openpay').hasError('email')">
                                                    Deber agregar un correo electronico
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-span-6 mt-5">
                                        <div class="flex-auto sm:pl-3">
                                            <mat-form-field
                                                class="flex-auto fuse-mat-dense fuse-mat-bold fuse-mat-rounded custom-mat-form-field-1">
                                                <mat-label>Número de tarjeta</mat-label>
                                                <input matInput maxlength="16" type="number"
                                                    (input)="numeroTarjeta($event)" [formControlName]="'numero_openpay'"
                                                    class="example-left-align" placeholder="4111*******11111">
                                            </mat-form-field>
                                        </div>
                                    </div>
                                </div>

                                <div class="grid grid-cols-12 gap-x-1 ">
                                    <div class="col-span-3 mt-5">
                                        <div class="flex-auto sm:pr-3">
                                            <mat-form-field
                                                class="flex-auto fuse-mat-dense fuse-mat-bold fuse-mat-rounded custom-mat-form-field-1">
                                                <mat-label>Mes</mat-label>
                                                <input matInput maxlength="2" type="number" (input)="mes($event)"
                                                    [formControlName]="'mes_openpay'" class="example-left-align"
                                                    placeholder="03">
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-span-3 mt-5">
                                        <div class="flex-auto sm:pl-3">
                                            <mat-form-field
                                                class="flex-auto fuse-mat-dense fuse-mat-bold fuse-mat-rounded custom-mat-form-field-1">
                                                <mat-label>Año</mat-label>
                                                <input matInput maxlength="2" type="number" (input)="ano($event)"
                                                    [formControlName]="'año_openpay'" class="example-left-align"
                                                    placeholder="25">
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-span-6 mt-5">
                                        <div class="flex-auto sm:pl-3">
                                            <mat-form-field
                                                class="flex-auto fuse-mat-dense fuse-mat-bold fuse-mat-rounded custom-mat-form-field-1">
                                                <mat-label>Código de seguridad</mat-label>
                                                <input matInput maxlength="3" type="number" (input)="cvv($event)"
                                                    [formControlName]="'cvv2_openpay'" class="example-left-align"
                                                    placeholder="110">
                                            </mat-form-field>
                                        </div>
                                    </div>
                                </div>

                                <div class="grid grid-cols-12 gap-x-1 ">
                                    <div class="col-span-6 mt-5">
                                        <div class="flex-auto sm:pr-3">
                                            <mat-form-field
                                                class="fuse-mat-dense fuse-mat-bold fuse-mat-rounded custom-mat-form-field-2">
                                                <mat-label>Monto</mat-label>
                                                <input matInput [formControlName]="'monto_openpay'"
                                                    class="example-right-align" [max]="totalVerificar"
                                                    placeholder="0.00" mask="separator.2" thousandSeparator=","
                                                    decimalMarker="." [leadZero]="true">
                                                <span matTextPrefix>$&nbsp;</span>
                                                <mat-error
                                                    *ngIf="horizontalStepperForm.get('step5').get('monto_openpay').errors?.max">
                                                    El monto no puede ser mayor que ${{ totalVerificar }}.
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-span-6 mt-5">
                                        <div class="flex-auto sm:pl-3">
                                            <mat-form-field
                                                class="flex-auto fuse-mat-dense fuse-mat-bold fuse-mat-rounded custom-mat-form-field-1">
                                                <mat-label>Descripción</mat-label>
                                                <input matInput maxlength="250"
                                                    [formControlName]="'descripcion_openpay'"
                                                    [placeholder]="'Descripción'">
                                            </mat-form-field>
                                        </div>
                                    </div>

                                </div>

                            </div>

                            <div class="border-2 border-gray-300 rounded-lg ml-3 p-3 mt-8 relative"
                                *ngIf="showComprobanteForm">
                                <h2 class="absolute top-0 left-4 bg-white px-2 -mt-4 font-medium text-gray-600">
                                    Transferencia
                                </h2>

                                <div class="flex mt-4">
                                    <mat-form-field
                                        class="flex-auto sm:pl-3 fuse-mat-dense fuse-mat-bold fuse-mat-rounded">
                                        <mat-label>Fecha</mat-label>
                                        <input matInput [formControlName]="'fecha'" [matDatepicker]="picker2"
                                            [placeholder]="'Fecha'" [min]="haceSieteDias" [max]="hoy">
                                        <mat-datepicker-toggle matIconSuffix [for]="picker2">
                                        </mat-datepicker-toggle>
                                        <mat-datepicker #picker2></mat-datepicker>
                                    </mat-form-field>

                                    <mat-form-field
                                        class="flex-auto sm:pl-3 fuse-mat-dense fuse-mat-bold fuse-mat-rounded">
                                        <mat-label>Monto</mat-label>
                                        <input matInput [formControlName]="'monto'" class="example-right-align"
                                            [max]="totalVerificar" placeholder="0.00" mask="separator.2"
                                            thousandSeparator="," decimalMarker="." [leadZero]="true">
                                        <mat-error *ngIf="horizontalStepperForm.get('step5').get('monto').errors?.max">
                                            El monto no puede ser mayor que ${{ totalVerificar }}.
                                        </mat-error>
                                        <span matTextPrefix>$&nbsp;</span>

                                    </mat-form-field>

                                </div>

                                <div class="flex mt-4">
                                    <mat-form-field
                                        class="flex-auto sm:pl-3 fuse-mat-dense fuse-mat-bold fuse-mat-rounded">
                                        <mat-label>No. de movimiento</mat-label>
                                        <input matInput maxlength="250" [placeholder]="'No. de movimiento'"
                                            [formControlName]="'numero_movimiento'" />
                                    </mat-form-field>

                                    <div class="col-span-3 mt-6">
                                        <div class="flex-auto sm:pl-3">
                                            <button mat-flat-button color="primary" class="addFile"
                                                [color]="!imagenUp ? 'primary' : 'accent'" (click)="fileInput.click()">
                                                <mat-icon
                                                    [svgIcon]="!imagenUp ? 'heroicons_mini:arrow-up-tray' : 'heroicons_solid:check'">
                                                </mat-icon>
                                                {{ !imagenUp ? 'Archivo' : 'Archivo' }}
                                            </button>
                                        </div>
                                    </div>

                                    <input type="file" #fileInput style="display: none"
                                        (change)="onFileSelected($event)">

                                    <div class="flex ml-3 items-center">
                                        <button mat-flat-button color="primary" (click)="agregarPrograma()"
                                            [disabled]="!formularioLleno">
                                            Agregar
                                        </button>
                                    </div>

                                </div>

                            </div>

                            <div class="border-2 border-gray-300 rounded-lg ml-3 p-3 mt-8 relative"
                                *ngIf="showDepositoForm">
                                <h2 class="absolute top-0 left-4 bg-white px-2 -mt-4 font-medium text-gray-600">
                                    Depósito
                                </h2>

                                <div class="flex mt-4">
                                    <mat-form-field
                                        class="flex-auto sm:pl-3 fuse-mat-dense fuse-mat-bold fuse-mat-rounded">
                                        <mat-label>Fecha</mat-label>
                                        <input matInput [matDatepicker]="picker3" [formControlName]="'fecha'"
                                            [min]="haceSieteDias" [max]="hoy" [placeholder]="'Fecha'">
                                        <mat-datepicker-toggle matIconSuffix [for]="picker3">
                                        </mat-datepicker-toggle>
                                        <mat-datepicker #picker3></mat-datepicker>
                                    </mat-form-field>


                                    <mat-form-field
                                        class="flex-auto sm:pl-3 fuse-mat-dense fuse-mat-bold fuse-mat-rounded">
                                        <mat-label>Monto</mat-label>

                                        <input matInput [formControlName]="'monto'" class="example-right-align"
                                            [max]="totalVerificar" placeholder="0.00" mask="separator.2"
                                            thousandSeparator="," decimalMarker="." [leadZero]="true">
                                        <mat-error *ngIf="horizontalStepperForm.get('step5').get('monto').errors?.max">
                                            El monto no puede ser mayor que ${{ totalVerificar }}.
                                        </mat-error>
                                        <span matTextPrefix>$&nbsp;</span>
                                    </mat-form-field>

                                </div>

                                <div class="flex mt-4">
                                    <mat-form-field
                                        class="flex-auto sm:pl-3 fuse-mat-dense fuse-mat-bold fuse-mat-rounded">
                                        <mat-label>No. de movimiento</mat-label>
                                        <input matInput maxlength="250" [formControlName]="'numero_movimiento'"
                                            [placeholder]="'No. de movimiento'" />
                                    </mat-form-field>

                                    <div class="col-span-3 mt-6">
                                        <div class="flex-auto sm:pl-3">
                                            <button mat-flat-button color="primary" class="addFile" color="primary"
                                                [color]="!imagenUp ? 'primary' : 'accent'" (click)="fileInput.click()">
                                                <mat-icon
                                                    [svgIcon]="!imagenUp ? 'heroicons_mini:arrow-up-tray' : 'heroicons_solid:check'"></mat-icon>
                                                {{ !imagenUp ? 'Archivo' : 'Archivo' }}
                                                <!-- Archivo -->
                                            </button>
                                        </div>
                                    </div>

                                    <input type="file" #fileInput style="display: none"
                                        (change)="onFileSelected($event)">

                                    <div class="flex ml-3 items-center">
                                        <button mat-flat-button color="primary" (click)="agregarPrograma()"
                                            [disabled]="!formularioLleno">
                                            Agregar
                                        </button>
                                    </div>

                                </div>

                            </div>
                            <!--//////////////////////////////// TIPOS DE PAGOS  ////////////////////////////-->

                            <div class="flex flex-col mr-3">
                                <table class="border-collapse border border-slate-400 ml-3 mt-5 mb-5">
                                    <thead>
                                        <tr>
                                            <!-- <th class="border border-slate-300">Día</th> -->
                                            <th class="border border-slate-300">Fecha</th>
                                            <th class="border border-slate-300">Monto</th>
                                            <th class="border border-slate-300">Movimiento</th>
                                            <th class="border border-slate-300">Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let item of comprobantes">
                                            <td class="border border-slate-300 text-center">{{ item.fecha }}</td>
                                            <td class="border border-slate-300 text-center">${{ item.monto |
                                                number:'1.2-2' }}
                                            </td>
                                            <td class="border border-slate-300 text-center">{{
                                                item.numero_movimiento }}</td>
                                            <td class="border border-slate-300 text-center">
                                                <div class="flex justify-center items-center">
                                                    <span
                                                        class="flex items-center shrink-0 min-w-4 w-8 h-8 px-1 my-1 mr-2 rounded-full bg-red-500">
                                                        <mat-icon title="Delete" style="
                                                                color: rgba(
                                                                    255,
                                                                    255,
                                                                    255,
                                                                    0.938
                                                                ) !important;
                                                                cursor: pointer;
                                                            " (click)="
                                                            eliminarPrograma(item)
                                                            ">delete</mat-icon>
                                                    </span>
                                                    <span
                                                        class="flex items-center shrink-0 min-w-4 w-8 h-8 px-1 my-1 rounded-full bg-primary-500"
                                                        (click)="openModal(item.comprobante)">
                                                        <mat-icon title="Ver" svgIcon="heroicons_mini:eye" style="
                                                                        color: rgba(
                                                                            255,
                                                                            255,
                                                                            255,
                                                                            0.938
                                                                        ) !important;
                                                                        cursor: pointer;
                                                                    "></mat-icon>
                                                    </span>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <div class="flex">
                                <mat-form-field class="flex-auto sm:pl-3 fuse-mat-dense fuse-mat-bold fuse-mat-rounded">
                                    <mat-label>Observaciones</mat-label>
                                    <textarea [placeholder]="'Observaciones'" matInput
                                        [formControlName]="'observaciones'" cdkTextareaAutosize
                                        [cdkAutosizeMinRows]="3">
                                    </textarea>
                                </mat-form-field>
                            </div>

                        </div>

                    </div>
                    <!-- end card -->

                    <!-- Terminos y condiciones -->
                    <div class="inline-flex items-end w-full mt-1.5 justify-end" *ngIf="showOpenpayForm">
                        <mat-checkbox class="-ml-2" [color]="'primary'" [formControlName]="'agreements'">
                            <span class="mr-1">Estoy de acuerdo con</span>
                            <a class="ml-1 text-primary-500 hover:underline" target="_blank"
                                [routerLink]="['/terms-and-conditions']">Términos
                            </a>
                            <span class="ml-1 mr-1">y</span>
                            <a class="ml-1 text-primary-500 hover:underline" target="_blank"
                                [routerLink]="['/terms-and-conditions']">política de
                                privacidad
                            </a>
                        </mat-checkbox>
                    </div>

                    <div class="flex justify-end mt-8">
                        <button class="px-8 mr-2" mat-flat-button [color]="'accent'" type="button" matStepperPrevious>
                            Regresar
                        </button>
                        <button class="px-8" mat-flat-button [color]="'primary'" type="button"
                            [disabled]="horizontalStepperStep5.stepControl.invalid || isLoading" (click)="create()">
                            <span *ngIf="!isLoading">
                                Reservar
                            </span>
                            <mat-progress-spinner *ngIf="isLoading" [diameter]="24" [mode]="'indeterminate'">
                            </mat-progress-spinner>
                        </button>

                        <!-- type="reset"
                            (click)="horizontalStepper.reset();" -->
                    </div>
                </mat-step>

            </mat-horizontal-stepper>
        </form>

        <!-- </div> -->

    </div>

</div>